



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploy and management &mdash; tk-core v0.18.101 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="tk-core v0.18.101 documentation" href="index.html"/>
        <link rel="next" title="Foundation" href="core.html"/>
        <link rel="prev" title="Shotgun pipeline Toolkit Core reference, v0.18.101" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    <a href='http://developer.shotgunsoftware.com'>
    
        <img style='width: 191px;
                height: 60px; 
                margin: 2px;
                border-radius: 0px; 
                padding: 0px;' 
            src='_static/logo@2x.png'/>
    
    </a>
    

          
            <a href="index.html" class="icon icon-home"> tk-core
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deploy and management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#traditional-project-setup">Traditional project setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bootstrapping-toolkit">Bootstrapping Toolkit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#toolkitmanager">ToolkitManager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exception-classes">Exception Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-the-sgtk-module-using-pip">Installing the sgtk module using pip</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.html">Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform.html">Apps, Engines and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="descriptor.html">Descriptor API</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
</ul>

            
          
       
    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px; 
                color: #b3b3b3; 
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>    
    <style>
        a.custom_post_menu { display: inline; 
                             padding: 0px; 
                             text-decoration: underline; }
    </style>

    <b>tk-core</b> v0.18.101.<br>
    
        This documentation is part of the Shotgun Pipeline Toolkit.
    
    For more information, please visit
    <a class=custom_post_menu href='https://support.shotgunsoftware.com/home'>Shotgun Support</a>.
    The code associated with this documentation can be found 
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/tk-core'>here</a>.

    </div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">tk-core</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Deploy and management</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploy-and-management">
<h1>Deploy and management<a class="headerlink" href="#deploy-and-management" title="Permalink to this headline">¶</a></h1>
<p>This section outlines the various ways to set up, configure and initialize a Toolkit Setup.
There are two fundamental approaches to running Toolkit: A traditional project based setup
and a <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager" title="sgtk.bootstrap.ToolkitManager"><code class="xref py py-class docutils literal"><span class="pre">ToolkitManager</span></code></a> API that allows for more flexible manipulation of
configurations and installations.</p>
<div class="section" id="traditional-project-setup">
<h2>Traditional project setup<a class="headerlink" href="#traditional-project-setup" title="Permalink to this headline">¶</a></h2>
<p>The traditional Toolkit &#8216;pipeline approach&#8217; means that you pick an existing Shotgun
project and run a Toolkit project setup for this project. This is typically done in
Shotgun Desktop or via the <code class="docutils literal"><span class="pre">tank</span> <span class="pre">setup_project</span></code> command. A Toolkit configuration
is installed in a shared location on disk and a pipeline configuration in Shotgun is
created to create an association between the installation on disk and the project in
Shotgun.</p>
<p>Once the installation has completed, you can access functionality via the <code class="docutils literal"><span class="pre">tank</span></code> command
for that project or run <a class="reference internal" href="core.html#sgtk.sgtk_from_entity" title="sgtk.sgtk_from_entity"><code class="xref py py-meth docutils literal"><span class="pre">sgtk.sgtk_from_entity()</span></code></a> or <a class="reference internal" href="core.html#sgtk.sgtk_from_path" title="sgtk.sgtk_from_path"><code class="xref py py-meth docutils literal"><span class="pre">sgtk.sgtk_from_path()</span></code></a>
in order to create an API session.</p>
</div>
<div class="section" id="bootstrapping-toolkit">
<h2>Bootstrapping Toolkit<a class="headerlink" href="#bootstrapping-toolkit" title="Permalink to this headline">¶</a></h2>
<p>An alternative to the traditional project based setup was introduced in Core v0.18 - the
<a class="reference internal" href="#sgtk.bootstrap.ToolkitManager" title="sgtk.bootstrap.ToolkitManager"><code class="xref py py-class docutils literal"><span class="pre">ToolkitManager</span></code></a> class allows for more flexible manipulation of toolkit setups
and removes the traditional step of a project setup. Instead, you can launch an engine
straight directly based on a Toolkit configuration. The manager encapsulates the deploy
and configuration management process and makes it easy to create a running instance of
Toolkit. It allows for several advanced use cases:</p>
<ul class="simple">
<li>Bootstrapping via the Toolkit manager does not require anything to be
set up or configured in Shotgun. No extensive project setup step is required.</li>
<li>A setup can be pre-bundled with for example an application plugin, allowing
Toolkit to act as a distribution platform.</li>
<li>The application bundles that are required can be stored anywhere on the local machine or the
network via the use of the <code class="docutils literal"><span class="pre">SHOTGUN_BUNDLE_CACHE_FALLBACK_PATHS</span></code> environment variable.</li>
<li>The Toolkit manager makes it easy to track remote resources (via the <code class="docutils literal"><span class="pre">sgtk.descriptor</span></code>
framework).</li>
</ul>
<p>The following example code can for example run inside maya in order
to launch Toolkit&#8217;s default config for a given Shotgun Asset:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sgtk</span>

<span class="c1"># Start up a Toolkit Manager</span>
<span class="n">mgr</span> <span class="o">=</span> <span class="n">sgtk</span><span class="o">.</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">ToolkitManager</span><span class="p">()</span>

<span class="c1"># Set the base configuration to the default config</span>
<span class="c1"># note that the version token is not specified</span>
<span class="c1"># The bootstrap will always try to use the latest version</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">base_configuration</span> <span class="o">=</span> <span class="s2">&quot;sgtk:descriptor:app_store?name=tk-config-default&quot;</span>

<span class="c1"># now start up the maya engine for a given Shotgun object</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">mgr</span><span class="o">.</span><span class="n">bootstrap_engine</span><span class="p">(</span><span class="s2">&quot;tk-maya&quot;</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Asset&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">})</span>
</pre></div>
</div>
<p>Note that the example is primitive and for example purposes only as it will take time to execute
and blocks execution during this period.</p>
<p>In this example, there is no need to construct any <a class="reference internal" href="core.html#sgtk.Sgtk" title="sgtk.Sgtk"><code class="xref py py-class docutils literal"><span class="pre">sgtk.Sgtk</span></code></a> instance or run a <code class="docutils literal"><span class="pre">tank</span></code>
command - the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager" title="sgtk.bootstrap.ToolkitManager"><code class="xref py py-class docutils literal"><span class="pre">ToolkitManager</span></code></a> instead becomes the entry point into the system. It will
handle the setup and initialization of the configuration behind the scenes
and start up a Toolkit session once all the required pieces have been initialized and set up.</p>
<div class="section" id="toolkitmanager">
<h3>ToolkitManager<a class="headerlink" href="#toolkitmanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sgtk.bootstrap.ToolkitManager">
<em class="property">class </em><code class="descclassname">sgtk.bootstrap.</code><code class="descname">ToolkitManager</code><span class="sig-paren">(</span><em>sg_user=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager" title="Permalink to this definition">¶</a></dt>
<dd><p>This class allows for flexible and non-obtrusive management of toolkit configurations
and installations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sg_user</strong> (<a class="reference internal" href="authentication.html#sgtk.authentication.ShotgunUser" title="sgtk.authentication.ShotgunUser"><code class="xref py py-class docutils literal"><span class="pre">ShotgunUser</span></code></a>) &#8211; Authenticated Shotgun User object. If you pass in None,
the manager will provide a standard authentication for you
via the shotgun authentication module and prompting the user
if necessary. If you have special requirements around
authentication, simply construct an explicit user object
and pass it in.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.extract_settings">
<code class="descname">extract_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.extract_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.extract_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Serializes settings that impact resolution of a pipeline configuration into an
object and returns it to the user.</p>
<p>This can be useful when a process is used to enumerate pipeline configurations and another
process will be bootstrapping an engine. Calling this method ensures the manager is
configured the same across processes.</p>
<p>Those settings can be restored with <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.restore_settings" title="sgtk.bootstrap.ToolkitManager.restore_settings"><code class="xref py py-meth docutils literal"><span class="pre">ToolkitManager.restore_settings()</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that the extracted settings should be treated as opaque data and not something
that should be manipulated. Their content can be changed at any time.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">User defined values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)">object</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.restore_settings">
<code class="descname">restore_settings</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.restore_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.restore_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Restores user defined with <a href="#id1"><span class="problematic" id="id2">:methd:`ToolkitManager.extract_settings`</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Always use <a href="#id3"><span class="problematic" id="id4">:methd:`ToolkitManager.extract_settings`</span></a> to extract settings when you
plan on calling this method. The content of the settings should be treated as opaque
data.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><em>object</em></a>) &#8211; Settings obtained from <a href="#id5"><span class="problematic" id="id6">:methd:`ToolkitManager.extract_settings`</span></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.allow_config_overrides">
<code class="descname">allow_config_overrides</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.allow_config_overrides" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether pipeline configuration resolution can be overridden via the
environment. Defaults to True on manager instantiation.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.pre_engine_start_callback">
<code class="descname">pre_engine_start_callback</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.pre_engine_start_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback will be invoked after the Toolkit instance has been
created but before the engine is started.</p>
<p>This function should have the following signature:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pre_engine_start_callback</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Called before the engine is started.</span>

<span class="sd">    :param :class:&quot;~sgtk.Context&quot; ctx: Context into</span>
<span class="sd">        which the engine will be launched. This can also be used</span>
<span class="sd">        to access the Toolkit instance.</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.pipeline_configuration">
<code class="descname">pipeline_configuration</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.pipeline_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>The pipeline configuration that is should be operated on.</p>
<p>By default, this value is set to <code class="docutils literal"><span class="pre">None</span></code>, indicating to the Manager
that it should attempt to find the most suitable Shotgun pipeline configuration
given the project and plugin id. In this case, it will look for all pipeline
configurations associated with the project who are associated with the current
user. If no user-tagged pipeline configuration exists, it will look for
the primary configuration, and in case this is not found, it will fall back on the
<a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a>. If you don&#8217;t want this check to be carried out in
Shotgun, please set <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup" title="sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup"><code class="xref py py-meth docutils literal"><span class="pre">do_shotgun_config_lookup()</span></code></a> to False.</p>
<p>Alternatively, you can set this to a specific pipeline configuration. In that
case, the Manager will look for a pipeline configuration that matches that name or id
and the associated project and plugin id. If such a config cannot be found in
Shotgun, it falls back on the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup">
<code class="descname">do_shotgun_config_lookup</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to indicate if the bootstrap process should connect to
Shotgun and attempt to resolve a config. Defaults to True.</p>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, the bootstrap process will connect to Shotgun as part
of the startup, look for a pipeline configuration and attempt
to resolve a toolkit environment to bootstrap into via the
Pipeline configuration data. Failing this, it will fall back on
the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a>.</p>
<p>If <code class="docutils literal"><span class="pre">False</span></code>, no Shotgun lookup will happen. Instead, whatever config
is defined via <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a> will always be used.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.plugin_id">
<code class="descname">plugin_id</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.plugin_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The Plugin Id is a string that defines the scope of the bootstrap operation.</p>
<p>If you are bootstrapping into an entire Toolkit pipeline, e.g
a traditional Toolkit setup, this should be left at its default <code class="docutils literal"><span class="pre">None</span></code> value.</p>
<p>If you are writing a plugin that is intended to run side by
side with other plugins in your target environment, the entry
point will be used to define a scope and sandbox in which your
plugin will execute.</p>
<p>When constructing a plugin id for an integration the following
should be considered:</p>
<ul class="simple">
<li>Plugin Ids should uniquely identify the plugin.</li>
<li>The name should be short and descriptive.</li>
</ul>
<p>We recommend a Plugin Id naming convention of <code class="docutils literal"><span class="pre">service.dcc</span></code>,
for example:</p>
<ul class="simple">
<li>A review plugin running inside RV: <code class="docutils literal"><span class="pre">review.rv</span></code>.</li>
<li>A basic set of pipeline tools running inside of Nuke: <code class="docutils literal"><span class="pre">basic.nuke</span></code></li>
<li>A plugin containg a suite of motion capture tools for maya: <code class="docutils literal"><span class="pre">mocap.maya</span></code></li>
</ul>
<p>Please make sure that your Plugin Id is <strong>unique, explicit and short</strong>.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.base_configuration">
<code class="descname">base_configuration</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>The descriptor (string or dict) for the
configuration that should be used as a base fallback
to be used whenever runtime and shotgun configuration
resolution doesn&#8217;t resolve an override configuration to use.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.bundle_cache_fallback_paths">
<code class="descname">bundle_cache_fallback_paths</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.bundle_cache_fallback_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies a list of fallback paths where toolkit will go
look for cached bundles in case a bundle isn&#8217;t found in
the primary app cache.</p>
<p>This is useful if you want to distribute a pre-baked
package, containing all the app version that a user needs.
This avoids downloading anything from the app store or other
sources.</p>
<p>Any missing bundles will be downloaded and cached into
the <em>primary</em> bundle cache.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.caching_policy">
<code class="descname">caching_policy</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.caching_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the config caching policy to use when bootstrapping.</p>
<p><code class="docutils literal"><span class="pre">ToolkitManager.CACHE_SPARSE</span></code> will make the manager download and cache
the sole config dependencies needed to run the engine being started.
This is the default caching policy.</p>
<p><code class="docutils literal"><span class="pre">ToolkitManager.CACHE_FULL</span></code> will make the manager download and cache
all the config dependencies.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.progress_callback">
<code class="descname">progress_callback</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.progress_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback function property to call whenever progress of the bootstrap should be reported back.</p>
<p>This function should have the following signature:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">progress_callback</span><span class="p">(</span><span class="n">progress_value</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Called whenever toolkit reports progress.</span>

<span class="sd">    :param progress_value: The current progress value as float number.</span>
<span class="sd">                           values will be reported in incremental order</span>
<span class="sd">                           and always in the range 0.0 to 1.0</span>
<span class="sd">    :param message:        Progress message string</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.bootstrap_engine">
<code class="descname">bootstrap_engine</code><span class="sig-paren">(</span><em>engine_name</em>, <em>entity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.bootstrap_engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.bootstrap_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an <a class="reference internal" href="core.html#sgtk.Sgtk" title="sgtk.Sgtk"><code class="xref py py-class docutils literal"><span class="pre">Sgtk</span></code></a> instance for the given engine and entity,
then launch into the given engine.</p>
<p>The whole engine bootstrap logic will be executed synchronously in the main application thread.</p>
<p>If entity is None, the method will bootstrap into the site
config. This method will attempt to resolve the config according
to business logic set in the associated resolver class and based
on this launch a configuration. This may involve downloading new
apps from the toolkit app store and installing files on disk.</p>
<p>Please note that the API version of the tk instance that hosts
the engine may not be the same as the API version that was
executed during the bootstrap.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>engine_name</strong> &#8211; Name of engine to launch (e.g. <code class="docutils literal"><span class="pre">tk-nuke</span></code>).</li>
<li><strong>entity</strong> (Dictionary with keys <code class="docutils literal"><span class="pre">type</span></code> and <code class="docutils literal"><span class="pre">id</span></code>, or <code class="docutils literal"><span class="pre">None</span></code> for the site.) &#8211; Shotgun entity to launch engine for.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="platform.html#sgtk.platform.Engine" title="sgtk.platform.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.bootstrap_engine_async">
<code class="descname">bootstrap_engine_async</code><span class="sig-paren">(</span><em>engine_name</em>, <em>entity=None</em>, <em>completed_callback=None</em>, <em>failed_callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.bootstrap_engine_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.bootstrap_engine_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an <a class="reference internal" href="core.html#sgtk.Sgtk" title="sgtk.Sgtk"><code class="xref py py-class docutils literal"><span class="pre">Sgtk</span></code></a> instance for the given engine and entity,
then launch into the given engine.</p>
<p>This method launches the bootstrap process and returns immediately.
The <a class="reference internal" href="core.html#sgtk.Sgtk" title="sgtk.Sgtk"><code class="xref py py-class docutils literal"><span class="pre">Sgtk</span></code></a> instance will be bootstrapped asynchronously in a background thread,
followed by launching the engine synchronously in the main application thread.
This will allow the main application to continue its execution and
remain responsive when bootstrapping the toolkit involves downloading files and
installing apps from the toolkit app store.</p>
<p>If entity is None, the method will bootstrap into the site
config. This method will attempt to resolve the config according
to business logic set in the associated resolver class and based
on this launch a configuration. This may involve downloading new
apps from the toolkit app store and installing files on disk.</p>
<p>Two callback functions can be provided.</p>
<p>A callback function that handles cleanup after successful completion of the bootstrap
with the following signature:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">completed_callback</span><span class="p">(</span><span class="n">engine</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Called by the asynchronous bootstrap upon completion.</span>

<span class="sd">    :param engine: Engine instance representing the engine</span>
<span class="sd">                   that was launched.</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<p>A callback function that handles cleanup after failed completion of the bootstrap
with the following signature:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">failed_callback</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Called by the asynchronous bootstrap if an exception is raised.</span>

<span class="sd">    :param phase: Indicates in which phase of the bootstrap the exception</span>
<span class="sd">                  was raised. An integer constant which is either</span>
<span class="sd">                  ToolkitManager.TOOLKIT_BOOTSTRAP_PHASE or</span>
<span class="sd">                  ToolkitManager.ENGINE_STARTUP_PHASE. The former if the</span>
<span class="sd">                  failure happened while the system was still bootstrapping</span>
<span class="sd">                  and the latter if the system had switched over into the</span>
<span class="sd">                  Toolkit startup phase. At this point, the running core API</span>
<span class="sd">                  instance may have been swapped over to another version than</span>
<span class="sd">                  the one that was originally loaded and may need to be reset</span>
<span class="sd">                  in an implementation of this callback.</span>

<span class="sd">    :param exception: The python exception that was raised.</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>engine_name</strong> &#8211; Name of engine to launch (e.g. <code class="docutils literal"><span class="pre">tk-nuke</span></code>).</li>
<li><strong>entity</strong> (Dictionary with keys <code class="docutils literal"><span class="pre">type</span></code> and <code class="docutils literal"><span class="pre">id</span></code>, or <code class="docutils literal"><span class="pre">None</span></code> for the site.) &#8211; Shotgun entity to launch engine for.</li>
<li><strong>completed_callback</strong> &#8211; Callback function that handles cleanup after successful completion of the bootstrap.</li>
<li><strong>failed_callback</strong> &#8211; Callback function that handles cleanup after failed completion of the bootstrap.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.prepare_engine">
<code class="descname">prepare_engine</code><span class="sig-paren">(</span><em>engine_name</em>, <em>entity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.prepare_engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.prepare_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates and caches a configuration on disk for a given project. The resolution of the pipeline
configuration will follow the same rules as the method <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.bootstrap_engine" title="sgtk.bootstrap.ToolkitManager.bootstrap_engine"><code class="xref py py-meth docutils literal"><span class="pre">ToolkitManager.bootstrap_engine()</span></code></a>,
but it simply caches all the bundles for later use instead of bootstrapping directly into it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>engine_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Name of the engine instance to cache if using sparse caching. If <code class="docutils literal"><span class="pre">None</span></code>,
all engine instances will be cached.</li>
<li><strong>entity</strong> &#8211; An entity link. If the entity is not a project, the project for that entity will be resolved.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Path to the fully realized pipeline configuration on disk and to the descriptor that
spawned it.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(str, <a class="reference internal" href="descriptor.html#sgtk.descriptor.ConfigDescriptor" title="sgtk.descriptor.ConfigDescriptor"><code class="xref py py-class docutils literal"><span class="pre">sgtk.descriptor.ConfigDescriptor</span></code></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.get_pipeline_configurations">
<code class="descname">get_pipeline_configurations</code><span class="sig-paren">(</span><em>project</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.get_pipeline_configurations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.get_pipeline_configurations" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the pipeline configurations available for a given project.</p>
<p>In order for a pipeline configuration to be considered as available, the following
conditions must be met:</p>
<blockquote>
<div><ul class="simple">
<li>There can only be one primary</li>
<li>If there is one site level and one project level primary, the site level
primary is not available.</li>
<li>If there are multiple site level or multiple project level primaries,
only the one with the lowest id is available, unless one or more of them is a Toolkit
Classic Primary, in which case the Toolkit Classic Primary with the lowest id will
be returned.</li>
<li>A <code class="xref py py-class docutils literal"><span class="pre">Descriptor</span></code> object must be able to be created from the
pipeline configuration.</li>
<li>All sandboxes are available.</li>
</ul>
</div></blockquote>
<p>In practice, this means that if there are 3 primaries, two of them using plugin ids and
one of them not using them, the one not using a plugin id will always be used.</p>
<p>This filtering also takes into account the current user and optional pipeline
configuration name or id. If the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.pipeline_configuration" title="sgtk.bootstrap.ToolkitManager.pipeline_configuration"><code class="xref py py-meth docutils literal"><span class="pre">pipeline_configuration()</span></code></a> property has been
set to a string, it will look for pipeline configurations with that specific name.
If it has been set to <code class="docutils literal"><span class="pre">None</span></code>, any pipeline that can be applied for the current
user and project will be retrieved. Note that this method does not support
<a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.pipeline_configuration" title="sgtk.bootstrap.ToolkitManager.pipeline_configuration"><code class="xref py py-meth docutils literal"><span class="pre">pipeline_configuration()</span></code></a> being an integer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>project</strong> (Dictionary with keys <code class="docutils literal"><span class="pre">type</span></code> and <code class="docutils literal"><span class="pre">id</span></code>.) &#8211; Project entity link to enumerate pipeline configurations for.
If <code class="docutils literal"><span class="pre">None</span></code>, this will enumerate the pipeline configurations
for the site configuration.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of pipeline configurations.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">List of dictionaries with keys <code class="docutils literal"><span class="pre">type</span></code>, <code class="docutils literal"><span class="pre">id</span></code>, <code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">project</span></code>, and <code class="docutils literal"><span class="pre">descriptor</span></code>.
The pipeline configurations will always be sorted such as the primary pipeline configuration,
if available, will be first. Then the remaining pipeline configurations will be sorted by
<code class="docutils literal"><span class="pre">name</span></code> field (case insensitive), then the <code class="docutils literal"><span class="pre">project</span></code> field and finally then <code class="docutils literal"><span class="pre">id</span></code> field.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.get_entity_from_environment">
<code class="descname">get_entity_from_environment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.get_entity_from_environment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.get_entity_from_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method that looks for the standard environment variables
<code class="docutils literal"><span class="pre">SHOTGUN_SITE</span></code>, <code class="docutils literal"><span class="pre">SHOTGUN_ENTITY_TYPE</span></code> and
<code class="docutils literal"><span class="pre">SHOTGUN_ENTITY_ID</span></code> and attempts to extract and validate them.
This is typically used in conjunction with <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.bootstrap_engine" title="sgtk.bootstrap.ToolkitManager.bootstrap_engine"><code class="xref py py-meth docutils literal"><span class="pre">bootstrap_engine()</span></code></a>.
The standard environment variables read by this method can be
generated by <a class="reference internal" href="platform.html#sgtk.platform.SoftwareLauncher.get_standard_plugin_environment" title="sgtk.platform.SoftwareLauncher.get_standard_plugin_environment"><code class="xref py py-meth docutils literal"><span class="pre">get_standard_plugin_environment()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Standard Shotgun entity dictionary with type and id or
None if not defined.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.resolve_descriptor">
<code class="descname">resolve_descriptor</code><span class="sig-paren">(</span><em>project</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.resolve_descriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.resolve_descriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves a pipeline configuration and returns its associated descriptor object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>project</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; The project entity, or None.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="sgtk.bootstrap.ToolkitManager.get_core_python_path">
<em class="property">static </em><code class="descname">get_core_python_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.get_core_python_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.get_core_python_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the path to the current Toolkit core.</p>
<p>The current Toolkit core is defined as the core that gets imported when you type
<code class="docutils literal"><span class="pre">import</span> <span class="pre">sgtk</span></code> and the python path is derived from that module.</p>
<p>For example, if the <code class="docutils literal"><span class="pre">sgtk</span></code> module was found at <code class="docutils literal"><span class="pre">/path/to/config/install/core/python/sgtk</span></code>,
the return path would be <code class="docutils literal"><span class="pre">/path/to/config/install/core/python</span></code></p>
<p>This can be useful if you want to hand down to a subprocess the location of the current
process&#8217;s core, since <code class="docutils literal"><span class="pre">sys.path</span></code> and the <code class="docutils literal"><span class="pre">PYTHONPATH</span></code> are not updated after
bootstrapping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Path to the current core.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exception-classes">
<h3>Exception Classes<a class="headerlink" href="#exception-classes" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sgtk.bootstrap.TankBootstrapError">
<em class="property">class </em><code class="descclassname">sgtk.bootstrap.</code><code class="descname">TankBootstrapError</code><a class="reference internal" href="_modules/tank/bootstrap/errors.html#TankBootstrapError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.TankBootstrapError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">tank.errors.TankError</span></code></p>
<p>Base class for all bootstrap related errors</p>
</dd></dl>

</div>
</div>
<div class="section" id="installing-the-sgtk-module-using-pip">
<h2>Installing the sgtk module using pip<a class="headerlink" href="#installing-the-sgtk-module-using-pip" title="Permalink to this headline">¶</a></h2>
<p>When running Toolkit using the bootstrap API above, you need access to the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager" title="sgtk.bootstrap.ToolkitManager"><code class="xref py py-class docutils literal"><span class="pre">ToolkitManager</span></code></a>
class in order to kickstart the bootstrap process. Once you have started the bootstrap, toolkit will
download all the necessary components for the given configuration you are bootstrapping into,
potentially even including a different version of the core API than you are using to bootstrap with.</p>
<p>In order to fully automate this process programatically, you need an <code class="docutils literal"><span class="pre">sgtk</span></code> instance to begin with.
One way to accomplish this is to use <code class="docutils literal"><span class="pre">pip</span></code> (see <a class="reference external" href="https://pip.pypa.io/">https://pip.pypa.io/</a>). Use the following syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">shotgunsoftware</span><span class="o">/</span><span class="n">tk</span><span class="o">-</span><span class="n">core</span><span class="nd">@v0</span><span class="o">.</span><span class="mf">18.35</span>
</pre></div>
</div>
<p>If you want to add an sgtk core to a <code class="docutils literal"><span class="pre">requirements.txt</span></code> file, use the following syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">shotgunsoftware</span><span class="o">/</span><span class="n">tk</span><span class="o">-</span><span class="n">core</span><span class="nd">@v0</span><span class="o">.</span><span class="mf">18.35</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In order to use <code class="docutils literal"><span class="pre">pip</span></code>, you currently need to have the git executable installed
on the system that you are deploying to.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">We strongly recommend always providing a version number. Not providing a version
number will currently download the latest commit from the master branch and
associate it with the highest available version number tag. Such downloads are
likely to contain changes which have not yet been full tested.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="core.html" class="btn btn-neutral float-right" title="Foundation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Shotgun pipeline Toolkit Core reference, v0.18.101" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Autodesk.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v0.18.101',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2114792-1', 'auto');
  ga('send', 'pageview');
</script>



</body>
</html>